@using Color = MudBlazor.Color
@using Size = MudBlazor.Size
@rendermode InteractiveWebAssembly
@attribute [Route(PageRoutes.InternetOfThings.SensorManagement)]
@* @attribute [Authorize] *@
@layout MainLayout

<PageTitle>@AppLang.Sensors</PageTitle>

<PageTitle>@AppLang.Sensors</PageTitle>

<div class="page-content-container">

    <MudDataGrid T="PageModel" Filterable="false" Dense="true" Bordered="true"
                 Height="calc(100vh - var(--mud-appbar-height) - 115px)" Items="Items"
                 Culture="CultureInfo.CurrentCulture" Hover="true" Striped="true">
        <ToolBarContent>
            <MudText Typo="Typo.h6">@AppLang.Sensors</MudText>
            <MudSpacer/>

            <div class="d-flex flex-row gap-3">
                <div class="page-content-container-search-field-width">
                    <MudAutocomplete T="string" Placeholder="@AppLang.Search" Variant="Variant.Outlined"
                                     Adornment="Adornment.Start" Margin="Margin.Dense"
                                     AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0">
                        <ProgressIndicatorTemplate>
                            <MudProgressLinear Size="Size.Small" Indeterminate="true" Color="Color.Success"/>
                        </ProgressIndicatorTemplate>
                    </MudAutocomplete>
                </div>
                
                <MudButton StartIcon="@Icons.Material.Filled.Add">@AppLang.Add</MudButton>
            </div>
           

        </ToolBarContent>
        <Columns>
            <PropertyColumn Property="x => x.Device.SensorId" Title="ID"/>
            <PropertyColumn Property="x => x.Device.SensorName" Title="@AppLang.Name"/>
            <PropertyColumn Property="x => x.Device.DeviceId" Title="@AppLang.Location"/>
            <PropertyColumn Property="x => x.Device.Status" Title="@AppLang.IP_address"/>
            <PropertyColumn Property="x => x.Device.ModifiedTime" Title="@AppLang.Modified_time" Format="dd/MM/yy HH:mm:ss"/>
            <PropertyColumn Property="x => x.Device.Status" Title="@AppLang.Status"/>
            <TemplateColumn Title="@AppLang.Action">
                <CellTemplate>

                    <div class="d-flex flex-row gap-3">
                        <MudTooltip Arrow="true" Placement="Placement.Top" Color="Color.Secondary" Text="@AppLang.Edit">
                            <MudIconButton Icon="@Icons.Material.Filled.Edit" Variant="Variant.Filled"
                                           OnClick="@context.Item.UpdateBtn.Action" Disabled="@context.Item.UpdateBtn.Disabled"
                                           Color="Color.Primary"/>
                        </MudTooltip>

                        <MudTooltip Arrow="true" Placement="Placement.Top" Color="Color.Secondary" Text="@AppLang.Delete">
                            <MudIconButton Icon="@Icons.Material.Filled.Delete" Variant="Variant.Filled"
                                           OnClick="@context.Item.DeleteBtn.Action" Disabled="@context.Item.DeleteBtn.Disabled"
                                           Color="Color.Primary"/>
                        </MudTooltip>
                    </div>

                </CellTemplate>
            </TemplateColumn>
        </Columns>
        <PagerContent>
            <MudDataGridPager RowsPerPageString="@AppLang.Rows_per_page" T="PageModel"/>
        </PagerContent>
    </MudDataGrid>

</div>